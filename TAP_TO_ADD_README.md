# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–ª–µ–π—Å–º–∞—Ä–∫–æ–≤ –ø–æ –Ω–∞–∂–∞—Ç–∏—é –Ω–∞ –∫–∞—Ä—Ç—É

## –û–±–∑–æ—Ä

–¢–µ–ø–µ—Ä—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–ª–µ–π—Å–º–∞—Ä–∫–æ–≤! –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –Ω–∞–∂–∏–º–∞—Ç—å –Ω–∞ –∫–∞—Ä—Ç—É –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ –º–µ—Ç–∫–∏.

## –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–ª–µ–π—Å–º–∞—Ä–∫–æ–≤**
- **–ù–∞–∂–∞—Ç–∏–µ –Ω–∞ –∫–∞—Ä—Ç—É**: –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—É—é –ø–ª–µ–π—Å–º–∞—Ä–∫—É –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –º–µ—Å—Ç–µ
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ**: –ú–µ—Ç–∫–∏ –ø–æ–ª—É—á–∞—é—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞
- **–í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ**: –ù–æ–≤—ã–µ –ø–ª–µ–π—Å–º–∞—Ä–∫–∏ —Å—Ä–∞–∑—É –≤–∏–¥–Ω—ã –Ω–∞ –∫–∞—Ä—Ç–µ

### 2. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –ø–ª–µ–π—Å–º–∞—Ä–∫–∞–º–∏**
- **–ü—Ä–æ—Å–º–æ—Ç—Ä**: –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫ –≤ –Ω–∏–∂–Ω–µ–π –ø–∞–Ω–µ–ª–∏
- **–£–¥–∞–ª–µ–Ω–∏–µ**: –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∫–∞–∂–¥–æ–π –º–µ—Ç–∫–∏
- **–û—á–∏—Å—Ç–∫–∞**: –ö–Ω–æ–ø–∫–∞ üóëÔ∏è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –º–µ—Ç–æ–∫

### 3. **–£–ª—É—á—à–µ–Ω–Ω—ã–π UI**
- **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è**: –ü–æ–¥—Å–∫–∞–∑–∫–∞ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–ü–∞–Ω–µ–ª—å –º–µ—Ç–æ–∫**: –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏ –Ω–∞–∑–≤–∞–Ω–∏–π
- **–ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ —Ñ—É–Ω–∫—Ü–∏—è–º

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –º–µ—Ç–∫–∏
1. **–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–∞—Ä—Ç—É** –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ
2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è** –Ω–æ–≤–∞—è –ø–ª–µ–π—Å–º–∞—Ä–∫–∞
3. **–ú–µ—Ç–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è** –≤ —Å–ø–∏—Å–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–ª–µ–π—Å–º–∞—Ä–∫–æ–≤

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∫–∞–º–∏
- **–£–¥–∞–ª–∏—Ç—å –æ–¥–Ω—É –º–µ—Ç–∫—É**: –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É üóëÔ∏è —Ä—è–¥–æ–º —Å –º–µ—Ç–∫–æ–π
- **–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –º–µ—Ç–∫–∏**: –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫—Ä–∞—Å–Ω—É—é –∫–Ω–æ–ø–∫—É üóëÔ∏è —Å–ø—Ä–∞–≤–∞
- **–ü—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç**: –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º –º–µ—Ç–∫–∏

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏–π
```kotlin
mapWindow.map.addMapTapListener(object : MapTapListener {
    override fun onMapTap(map: Map, point: Point) {
        // –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –ø–ª–µ–π—Å–º–∞—Ä–∫–∏
        val placemark = map.mapObjects.addPlacemark(point)
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–∫–æ–Ω–∫–∏ –∏ —Å—Ç–∏–ª—è
        // –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏
    }
})
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
```kotlin
data class CustomPlacemark(
    val id: String,           // –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
    val title: String,        // –ù–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ç–∫–∏
    val position: Point,      // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
    val timestamp: Long       // –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è
)
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- **MapScreenMutableState**: –•—Ä–∞–Ω–∏—Ç —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø–ª–µ–π—Å–º–∞—Ä–∫–æ–≤
- **MapState**: –£–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞—Ç–∏–≤–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏ –∫–∞—Ä—Ç—ã
- **Callback —Å–∏—Å—Ç–µ–º–∞**: –£–≤–µ–¥–æ–º–ª—è–µ—Ç UI –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö

## –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 1. `Map.kt`
- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `addPlacemarkAtPoint()`
- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `addPlacemarkAtScreenPoint()`
- –î–æ–±–∞–≤–ª–µ–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ –ø–ª–µ–π—Å–º–∞—Ä–∫–∞–º–∏

### 2. `Map.android.kt`
- –î–æ–±–∞–≤–ª–µ–Ω `MapTapListener` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞–∂–∞—Ç–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–µ–π—Å–º–∞—Ä–æ–∫ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏

### 3. `App.kt`
- –î–æ–±–∞–≤–ª–µ–Ω –∫–ª–∞—Å—Å `CustomPlacemark`
- –û–±–Ω–æ–≤–ª–µ–Ω UI –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –º–µ—Ç–æ–∫
- –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 4. `MapAnimationConfig.kt`
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–Ω–∏–º–∞—Ü–∏–π –æ—Å—Ç–∞–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

## –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- ‚úÖ **Android**: –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
- ‚ö†Ô∏è **iOS**: –ë–∞–∑–æ–≤–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —á–µ—Ä–µ–∑ –æ–±—â–∏–µ –º–µ—Ç–æ–¥—ã
- ‚úÖ **Web**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —á–µ—Ä–µ–∑ –æ–±—â–∏–µ –º–µ—Ç–æ–¥—ã

## –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–±–ª–µ–º—ã —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –º–µ—Ç–æ–∫
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–∞—Ä—Ç–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `MapTapListener` –¥–æ–±–∞–≤–ª–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

### –ü—Ä–æ–±–ª–µ–º—ã —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `MapScreenMutableState`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ callback `onPlacemarkAdded` –Ω–∞—Å—Ç—Ä–æ–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ –º–µ—Ç–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ
```kotlin
val point = PointFactory.create(59.9343, 30.3061)
mapState.addPlacemarkAtPoint(point, "–ò—Å–∞–∞–∫–∏–µ–≤—Å–∫–∏–π —Å–æ–±–æ—Ä")
```

### –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –º–µ—Ç–æ–∫
```kotlin
mapScreenMutableState.clearAllCustomPlacemarks()
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –º–µ—Ç–æ–∫
```kotlin
val placemarks = mapScreenMutableState.getCustomPlacemarks()
```

## –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ—Ç–æ–∫**: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞–∑–≤–∞–Ω–∏—è –∏ –æ–ø–∏—Å–∞–Ω–∏—è
2. **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–µ—Ç–æ–∫**: –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ç–∏–ø–∞–º
3. **–≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç**: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –º–µ—Ç–æ–∫
4. **–ü–æ–∏—Å–∫**: –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –º–µ—Ç–æ–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏–ª–∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
5. **–°—Ç–∏–ª–∏**: –†–∞–∑–ª–∏—á–Ω—ã–µ –∏–∫–æ–Ω–∫–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –º–µ—Ç–æ–∫
